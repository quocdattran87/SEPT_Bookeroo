(this.webpackJsonpmyfirstapp=this.webpackJsonpmyfirstapp||[]).push([[0],{102:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var r,n,l,s,c,o,i,u,m,p=a(0),d=a.n(p),h=a(28),b=a.n(h),E=a(3),v=a(4),g=a(6),f=a(5),y=(a(68),a(69),a(2)),N=a(7),k=a(9),S=a(25),w=a(54),O={usernameError:"",emailError:"",loginError:""},C=a(32),j={users:[],user:{},seller:{}},A={validToken:!1,user:{}},x=function(e){return!!e},R={orders:[],userOrders:[]},U=Object(S.b)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_EXISTS_ERROR":return e.usernameError=t.payload,e;case"EMAIL_EXISTS_ERROR":return e.emailError=t.payload,e;case"LOGIN_ERROR":return e.loginError=t.payload,e;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(C.a)(Object(C.a)({},e),{},{users:t.payload});case"GET_USER":return Object(C.a)(Object(C.a)({},e),{},{user:t.payload});default:return e}},security:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return{validToken:x(t.payload),user:t.payload};default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_ORDERS":return e.userOrders=t.payload,e;default:return e}}}),T={},B=[w.a],F=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),I=window.navigator.userAgent.includes("Chrome")&&F?Object(S.d)(U,T,Object(S.c)(S.a.apply(void 0,B),F)):Object(S.d)(U,T,Object(S.c)(S.a.apply(void 0,B))),_=a(11),P=a(10),D=a.n(P),L=a(8),q=a.n(L),J=a(12),z=function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n,l;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("http://ec2-13-55-218-209.ap-southeast-2.compute.amazonaws.com:8080/api/books/".concat(e));case 3:return n=a.sent,localStorage.setItem("book",JSON.stringify(n.data)),a.next=7,D.a.get("http://ec2-54-79-242-119.ap-southeast-2.compute.amazonaws.com:8083/api/reviews/book/".concat(e));case 7:l=a.sent,localStorage.setItem("bookReviews",JSON.stringify(l.data)),t.push("/book"),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),alert("Failed to get single book"),t.push("/");case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},G=(a(92),a(16)),M=a(56),$=a.n(M),X=function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users");case 3:n=a.sent,localStorage.setItem("users",JSON.stringify(n.data)),r({type:"GET_USERS",payload:n.data}),"toPending"===t?e.push("/pending"):"toAllUsers"===t&&e.push("/allUsers"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),alert("Failed to get all users");case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},V=function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n,l;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/seller/".concat(e));case 3:return n=a.sent,localStorage.setItem("seller",JSON.stringify(n.data)),a.next=7,D.a.get("http://ec2-54-79-242-119.ap-southeast-2.compute.amazonaws.com:8083/api/reviews/user/".concat(e));case 7:l=a.sent,localStorage.setItem("userReviews",JSON.stringify(l.data)),t.push("/seller"),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),alert("Failed to get seller"),t.push("/");case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},W=function(e){return function(){var t=Object(J.a)(q.a.mark((function t(a){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.delete("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/".concat(e));case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),alert("Failed to delete user"),alert(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},Z={query:""},H=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state=Z,r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.state.query.trim()){var t={query:this.state.query};this.props.queryBooks(t,this.props.history)}}},{key:"componentDidMount",value:function(){console.log(I.getState()),I.getState().security.validToken&&this.props.getUser(I.getState().security.user.id,this.props.history),this.forceUpdate()}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark mb-4"},d.a.createElement("div",{className:"container"},d.a.createElement(y.b,{className:"navbar-brand",to:"/"},d.a.createElement("h1",null,"Bookeroo",d.a.createElement("i",{className:"fas fa-book"}))),d.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#mobile-nav"},d.a.createElement("span",{className:"navbar-toggler-icon"})),d.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},d.a.createElement("div",{className:"navbar-nav mr-auto"},d.a.createElement("form",{className:"searchForm",onSubmit:this.onSubmit},d.a.createElement("div",{className:"search"},d.a.createElement("input",{id:"query",className:"searchBar",name:"query",type:"text",placeholder:"Search Title, Author, Genre or ISBN",value:this.state.query,onChange:this.onChange}),d.a.createElement("button",{className:"searchIcon",type:"submit","background-color":"white"},d.a.createElement($.a,null))))),I.getState().security.validToken?d.a.createElement("ul",{className:"navbar-nav ml-auto"},d.a.createElement("li",{className:"about-item"},d.a.createElement(y.b,{className:"nav-link ",to:"/about"},"About")),"Admin"!==I.getState().security.user.accountType?d.a.createElement("li",{className:"nav-item"},d.a.createElement(y.b,{className:"nav-link ",to:"/sell"},"Sell")):"",d.a.createElement("li",{className:"nav-item"},d.a.createElement(y.b,{className:"nav-link ",to:"/dashboard"},I.getState().security.user.username.charAt(0).toUpperCase()+I.getState().security.user.username.slice(1)))):d.a.createElement("ul",{className:"navbar-nav ml-auto"},d.a.createElement("li",{className:"about-item"},d.a.createElement(y.b,{className:"nav-link ",to:"/about"},"About")),d.a.createElement("li",{className:"nav-item"},d.a.createElement(y.b,{className:"nav-link ",to:"/signup"},"Sign Up")),d.a.createElement("li",{className:"nav-item"},d.a.createElement(y.b,{className:"nav-link",to:"/login"},"Log In")))))))}}]),a}(p.Component),Q=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{queryBooks:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-13-55-218-209.ap-southeast-2.compute.amazonaws.com:8080/api/books/search",e);case 3:n=a.sent,localStorage.setItem("books",JSON.stringify(n.data)),localStorage.setItem("query",e.query),t.push("/"),t.push("/search"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),alert("Search error"),t.push("/");case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()},getUser:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.get("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/".concat(e));case 3:n=a.sent,r({type:"GET_USER",payload:n.data}),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),alert("Failed to get user"),t.push("/");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})(H)),Y=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={books:[]},r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;D.a.get("http://ec2-13-55-218-209.ap-southeast-2.compute.amazonaws.com:8080/api/books").then((function(t){e.setState({books:t.data})}))}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"onSubmit",value:function(e,t){e.preventDefault(),this.props.getBook(t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"App"},d.a.createElement(Q,null)),d.a.createElement("div",{className:"wrapper-row"},d.a.createElement("h1",{className:"popular-heading"},"Popular"),d.a.createElement("div",{className:"book-row"},this.state.books.map((function(t){return d.a.createElement(y.b,{key:t.id,className:"book-card",to:"/book",type:"submit",onClick:function(a){return e.onSubmit(a,t.id)}},d.a.createElement("div",{className:"bookCover"},d.a.createElement("img",{key:t.id,src:t.image,alt:t.title,className:"book-image"})),d.a.createElement("h1",{className:"book-price"},"$",t.price.toFixed(2)),d.a.createElement("h1",{className:"book-title"},t.title))})))),d.a.createElement("hr",null),d.a.createElement("div",{className:"wrapper-row"},d.a.createElement("h1",{className:"popular-heading"},"Highest Rated"),d.a.createElement("div",{className:"book-row"},this.state.books.map((function(t){return d.a.createElement(y.b,{key:t.id,className:"book-card",to:"/book",type:"submit",onClick:function(a){return e.onSubmit(a,t.id)}},d.a.createElement("div",{className:"bookCover"},d.a.createElement("img",{key:t.id,src:t.image,alt:t.title,className:"book-image"})),d.a.createElement("h1",{className:"book-price"},"$",t.price.toFixed(2)),d.a.createElement("h1",{className:"book-title"},t.title))})))),d.a.createElement("hr",null))}}]),a}(p.Component),K=Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getBook:z})(Y),ee=a(26),te=a(27),ae=a(61),re=(te.a.nav(r||(r=Object(ee.a)(["\n    background: linear-gradient(90deg, rgb(110,94,254)0%, rgba(73,63,252,1)100%);\n    height: 80px;\n    display: flex;\n    justify-content: space-between;\n    padding: 0.5rem calc((100vw-1000px)/2)\n    z-index: 10;\n"]))),Object(te.a)(y.c)(n||(n=Object(ee.a)(["\n    color: #fff;\n    display: flex;\n    align-items: center;\n    text-decoration: none;\n    padding: 0 1rem;\n    height: 100%;\n    cursor: pointer;\n    &.active {\n        color: #fff;\n    }\n"])))),ne=Object(te.a)(y.c)(l||(l=Object(ee.a)(["\n    color: #000;\n    display: flex;\n    align-items: center;\n    text-decoration: none;\n    padding: 0 1rem;\n    height: 100%;\n    cursor: pointer;\n    &.active {\n        color: #000;\n    }\n"]))),le=(Object(te.a)(y.c)(s||(s=Object(ee.a)(["\n    color: #fff;\n    display: flex;\n    align-items: center;\n    text-decoration: none;\n    padding: 0 1rem;\n    height: 100%;\n    cursor: pointer;\n\n    &.active {\n        color: #79eaf6;\n    }\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        color: #79eaf6;\n    }\n"]))),Object(te.a)(ae.a)(c||(c=Object(ee.a)(["\n    display: none;\n    color: #fff;\n\n    @media screen and (max-width: 768px) {\n        display: block;\n        position: absolute;\n        top: 0;\n        right: 0;\n        transform: translate(-100%,75%);\n        font-size: 1.8rem;\n        cursor: pointer;\n    }\n"]))),te.a.div(o||(o=Object(ee.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 5px;\n\n    @media screen and (max-width: 768px) {\n        display: none;\n    }\n"]))),te.a.nav(i||(i=Object(ee.a)(["\n    display: flex;\n    align-items: center;\n    margin-right: 24px;\n    margin-left: 24px;\n\n    @media screen and (max-width: 768px) {\n        display:none;\n    }\n"]))),Object(te.a)(y.c)(u||(u=Object(ee.a)(["\n    border-radius: 4px;\n    background: #6568F4;\n    padding: 10px 22px;\n    color: #fff;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    transition: all 0.2s ease-in-out;\n    text-decoration: none;\n\n    &:hover {\n        transition: all 0.2s ease-in-out;\n        background: #fff;\n        color: #010606;\n    }\n"]))),a(102),function(e){e?D.a.defaults.headers.common.Authorization=e:delete D.a.defaults.headers.common.Authorization}),se=a(34),ce=function(e){return function(t){localStorage.removeItem("jwtToken"),le(!1),t({type:"SET_CURRENT_USER",payload:null}),e.push("/")}},oe={username:"",password:"",usernameError:"",passwordError:""},ie=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).validate=function(){var e="",t="";return r.state.username.trim()||(e="Username required"),r.state.password||(t="Password required"),!e&&!t||(r.setState({usernameError:e,passwordError:t}),!1)},r.state=oe,r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){if(this.props.errors.loginError){var e=this.props.errors.loginError;this.setState({usernameError:e}),this.props.errors.loginError=""}this.forceUpdate()}},{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validate()){var t={username:this.state.username,password:this.state.password};this.props.login(t,this.props.history)}}},{key:"render",value:function(){return d.a.createElement("div",{className:"form-container"},d.a.createElement("span",{className:"close-btn"},d.a.createElement(re,{to:"/"},"x")," "),d.a.createElement("div",{className:"form-content-left"},d.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},d.a.createElement(ne,{to:"/"},d.a.createElement("h1",null,"Bookeroo",d.a.createElement("i",{className:"fas fa-book"}))))),d.a.createElement("div",{className:"form-content-right"},d.a.createElement("form",{className:"form",onSubmit:this.onSubmit},d.a.createElement("h1",null,"Log In"),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("label",{htmlFor:"username",className:"form-label"},"Username"),d.a.createElement("input",{id:"username",type:"text",name:"username",className:"form-input",placeholder:"Enter your username",value:this.state.username,onChange:this.onChange}),d.a.createElement("p",null,this.state.usernameError)),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),d.a.createElement("input",{id:"password",type:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:this.state.password,onChange:this.onChange}),d.a.createElement("p",null,this.state.passwordError)),d.a.createElement("button",{className:"form-input-btn",type:"submit"},"Log In"),d.a.createElement("span",{className:"form-input-login"},"Don't have an account? Create one ",d.a.createElement(y.b,{to:"/signup"},"here")))))}}]),a}(p.Component),ue=Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{login:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n,l,s;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/login",e);case 3:if(n=a.sent,l=n.data.token,!1!==(s=Object(se.a)(l)).isActive){a.next=10;break}throw new Error("Awaiting Approval");case 10:localStorage.setItem("jwtToken",l),le(l),r({type:"SET_CURRENT_USER",payload:s}),t.push("/");case 14:a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),"undefined"===typeof a.t0.response?r({type:"LOGIN_ERROR",payload:"Account is awaiting approval by admin"}):r({type:"LOGIN_ERROR",payload:"Invalid username and password combination"}),t.push("/"),t.push("/login");case 21:case"end":return a.stop()}}),a,null,[[0,16]])})));return function(e){return a.apply(this,arguments)}}()}})(ie),me={username:"",email:"",password:"",confirmPassword:"",accountType:"",abn:"",usernameError:"",emailError:"",passwordError:"",confirmPasswordError:"",accountTypeError:"",abnError:""},pe=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).validate=function(){var e="",t="",a="",n="",l="",s="";return r.state.username.trim()||(e="Username required"),r.state.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(r.state.email)||(t="Invalid email"):t="Email required",r.state.password?r.state.password.length<6?a="Password needs to be 6 characters or more":r.state.confirmPassword||r.state.password?!r.state.confirmPassword&&r.state.password.length>=6?n="Confirmation required":r.state.confirmPassword!==r.state.password&&(a="Passwords to not match"):n="Password required":a="Password required",r.state.accountType||(l="Account type required"),r.state.abn||"Publisher"!==r.state.accountType?10===r.state.abn.length&&/^[0-9\b]+$/.test(r.state.abn)||0===r.state.abn.length||(s="ABN must be 10 digits"):s="ABN required",!(e||t||a||n||l||s)||(r.setState({usernameError:e,emailError:t,passwordError:a,confirmPasswordError:n,accountTypeError:l,abnError:s}),!1)},r.state=me,r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){if(this.props.errors.usernameError){var e=this.props.errors.usernameError;this.setState({usernameError:e}),this.props.errors.usernameError=""}else if(this.props.errors.emailError){var t=this.props.errors.emailError;this.setState({emailError:t}),this.props.errors.emailError=""}this.forceUpdate()}},{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t=!0;if(this.validate()){"Publisher"===this.state.accountType&&(t=!1);var a={username:this.state.username.toLowerCase(),email:this.state.email.toLowerCase(),password:this.state.password,confirmPassword:this.state.confirmPassword,accountType:this.state.accountType,isActive:t,abn:this.state.abn};this.props.createNewUser(a,this.props.history)}}},{key:"render",value:function(){return d.a.createElement("div",{className:"form-container"},d.a.createElement("span",{className:"close-btn"},d.a.createElement(re,{to:"/"},"x")," "),d.a.createElement("div",{className:"form-content-left"},d.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},d.a.createElement(ne,{to:"/"},d.a.createElement("h1",null,"Bookeroo",d.a.createElement("i",{className:"fas fa-book"}))))),d.a.createElement("div",{className:"form-content-right"},d.a.createElement("form",{className:"form",onSubmit:this.onSubmit},d.a.createElement("h1",null,"Sign Up"),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("label",{htmlFor:"username",className:"form-label"},"Username"),d.a.createElement("input",{id:"username",type:"text",name:"username",className:"form-input",placeholder:"Enter your username",value:this.state.username,onChange:this.onChange}),d.a.createElement("p",null,this.state.usernameError)),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),d.a.createElement("input",{id:"email",type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:this.state.email,onChange:this.onChange}),d.a.createElement("p",null,this.state.emailError)),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("label",{htmlFor:"password",className:"form-label"},"Password"),d.a.createElement("input",{id:"password",type:"password",name:"password",className:"form-input",placeholder:"Enter your password",value:this.state.password,onChange:this.onChange}),d.a.createElement("p",null,this.state.passwordError)),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirm Password"),d.a.createElement("input",{id:"confirmPassword",type:"password",name:"confirmPassword",className:"form-input",placeholder:"Confirm your password",value:this.state.confirmPassword,onChange:this.onChange}),d.a.createElement("p",null,this.state.confirmPasswordError)),d.a.createElement("div",{className:"form-inputs"},d.a.createElement("div",{className:"account-type-inputs"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"accountType",className:"form-label"},"Account Type"),d.a.createElement("div",null,d.a.createElement("select",{id:"accountType",type:"text",name:"accountType",onChange:this.onChange},d.a.createElement("option",null),d.a.createElement("option",null,"Regular"),d.a.createElement("option",null,"Publisher")),d.a.createElement("p",null,this.state.accountTypeError))),"Publisher"===this.state.accountType?d.a.createElement("div",{className:"abn-form-input"},d.a.createElement("label",{htmlFor:"abn",className:"form-label"},"ABN"),d.a.createElement("input",{id:"abn",type:"text",name:"abn",className:"form-input",placeholder:"Enter your ABN",value:this.state.abn,onChange:this.onChange}),d.a.createElement("p",null,this.state.abnError)):"")),d.a.createElement("button",{className:"form-input-btn",type:"submit"},"Create Account"),d.a.createElement("span",{className:"form-input-login"},"Already have an account? Login ",d.a.createElement(y.b,{to:"/login"},"here")))))}}]),a}(p.Component),de=Object(k.b)((function(e){return{errors:e.errors}}),{createNewUser:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/register",e);case 3:t.push("/login"),"Regular"===e.accountType?alert("Account created! Please log in."):"Publisher"===e.accountType&&alert("Account created. Please wait to be verified by an admin."),a.next=13;break;case 7:a.prev=7,a.t0=a.catch(0),400===a.t0.response.status&&r({type:"EMAIL_EXISTS_ERROR",payload:a.t0.response.data.username}),406===a.t0.response.status&&r({type:"USER_EXISTS_ERROR",payload:a.t0.response.data.username}),t.push("/"),t.push("/signup");case 13:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})(pe),he=a(123),be=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={books:JSON.parse(localStorage.books),query:localStorage.query},r}return Object(v.a)(a,[{key:"onSubmit",value:function(e,t){e.preventDefault(),this.props.getBook(t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"App"},d.a.createElement(Q,null)),0===this.state.books.length?d.a.createElement("h1",{className:"search-results"}," No results for '",this.state.query,"'"):d.a.createElement("h1",{className:"search-results"},this.state.books.length," books containing '",this.state.query,"'"),d.a.createElement("div",{className:"grid-container"},d.a.createElement(he.a,{container:!0,spacing:3},this.state.books.map((function(t){return d.a.createElement(he.a,{item:!0,xs:3,key:t.id},d.a.createElement(y.b,{className:"searched-book-card",to:"/book",type:"submit",onClick:function(a){return e.onSubmit(a,t.id)}},d.a.createElement("img",{key:t.id,src:t.image,alt:t.title,className:"book-image"}),d.a.createElement("h1",{className:"book-title"},t.title),d.a.createElement("div",{className:"book-info"},d.a.createElement("h1",{className:"book-author"},"Author: ",t.author),d.a.createElement("h1",{className:"book-price"},"Price: ",t.price.toFixed(2)))))})))))}}]),a}(p.Component),Ee=Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getBook:z})(be),ve=function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-54-79-242-119.ap-southeast-2.compute.amazonaws.com:8083/api/reviews/review",e);case 3:t.push("/user-orders"),a.next=10;break;case 6:a.prev=6,a.t0=a.catch(0),alert("Review user failed!"),t.push("/");case 10:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()},ge=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"onSubmit",value:function(e,t){if(e.preventDefault(),"pendingAccounts"===t)this.props.getUsers(this.props.history,"toPending");else if("allAccounts"===t)this.props.getUsers(this.props.history,"toAllUsers");else if("allTransactions"===t)this.props.getAllOrders(this.props.history);else if("allBooks"===t)this.props.getAllBooks(this.props.history);else if("allReviews"===t)this.props.getAllReviews(this.props.history);else if("orders"===t){var a={username:I.getState().security.user.username};this.props.getUserOrders(a,this.props.history)}else"delete"===t?window.confirm("Are you sure you want to delete your account?")&&(this.props.deleteUser(I.getState().security.user.id),this.props.logout(this.props.history),alert("Account deleted")):"logout"===t&&this.props.logout(this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),"Admin"===I.getState().security.user.accountType?d.a.createElement("ul",{className:"list-group"},d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"pendingAccounts")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-flag-checkered pr-1"},"Pending Accounts"))),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"allAccounts")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"All Accounts"))),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"allTransactions")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"All Transactions"))),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"allBooks")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"All Books"))),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"allReviews")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"All Reviews"))),d.a.createElement("br",null),d.a.createElement(y.b,{to:"/edit"},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"Edit Account"))),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"logout")}},d.a.createElement("li",{className:"list-group-item board"},"Log Out"))):d.a.createElement("ul",{className:"list-group"},d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"orders")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-flag-checkered pr-1"},"Transaction History"))),d.a.createElement(y.b,{to:"/edit"},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"Edit Account"))),d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"delete")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-minus-circle pr-1"},"Delete Account"))),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"logout")}},d.a.createElement("li",{className:"list-group-item board"},"Log Out")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-9"},d.a.createElement("h4",null,I.getState().security.user.username.charAt(0).toUpperCase()+I.getState().security.user.username.slice(1).toLowerCase()),d.a.createElement("hr",null),null!==I.getState().security.user.firstName&&""!==I.getState().security.user.firstName?d.a.createElement(d.a.Fragment,null,null===I.getState().security.user.lastName||""===I.getState().security.user.lastName?d.a.createElement("p",null,"Name: ",I.getState().security.user.firstName.charAt(0).toUpperCase()+I.getState().security.user.firstName.slice(1)):d.a.createElement("p",null,"Name: ",I.getState().security.user.firstName.charAt(0).toUpperCase()+I.getState().security.user.firstName.slice(1)," ",I.getState().security.user.lastName.charAt(0).toUpperCase()+I.getState().security.user.lastName.slice(1).toLowerCase())):d.a.createElement(d.a.Fragment,null,null!==I.getState().security.user.lastName&&""!==I.getState().security.user.lastName?d.a.createElement("p",null,"Name: ",I.getState().security.user.lastName.charAt(0).toUpperCase()+I.getState().security.user.lastName.slice(1)):""),d.a.createElement("p",null,"Email: ",I.getState().security.user.email.toLowerCase()),null!==I.getState().security.user.phone&&""!==I.getState().security.user.phone?d.a.createElement("p",null,"Phone: ",I.getState().security.user.phone):"","Publisher"===I.getState().security.user.accountType?d.a.createElement(d.a.Fragment,null,null!==I.getState().security.user.abn&&""!==I.getState().security.user.abn?d.a.createElement("p",null,"ABN: ",I.getState().security.user.abn):""):"",null!==I.getState().security.user.about&&""!==I.getState().security.user.about?d.a.createElement("p",null,"About: ",I.getState().security.user.about):""))))}}]),a}(p.Component),fe=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{logout:ce,getUserOrders:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){var n;return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-13-210-206-21.ap-southeast-2.compute.amazonaws.com:8082/api/orders/userOrders",e);case 3:n=a.sent,localStorage.setItem("orders",JSON.stringify(n.data)),r({type:"GET_USER_ORDERS",payload:n.data}),t.push("/user-orders"),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),alert("Failed to get orders"),t.push("/");case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()},getAllOrders:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(a){var r;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.get("http://ec2-13-210-206-21.ap-southeast-2.compute.amazonaws.com:8082/api/orders");case 3:r=t.sent,localStorage.setItem("allOrders",JSON.stringify(r.data)),e.push("/all-orders"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Failed to get orders");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getAllBooks:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(a){var r;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.get("http://ec2-13-55-218-209.ap-southeast-2.compute.amazonaws.com:8080/api/books");case 3:r=t.sent,localStorage.setItem("books",JSON.stringify(r.data)),e.push("/all-books"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Failed to get single book"),e.push("/");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getAllReviews:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(a){var r;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.get("http://ec2-54-79-242-119.ap-southeast-2.compute.amazonaws.com:8083/api/reviews");case 3:r=t.sent,localStorage.setItem("reviews",JSON.stringify(r.data)),e.push("/all-reviews"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert("Get all reviews failed!"),e.push("/");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getUsers:X,deleteUser:W})(ge)),ye=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement(fe,null))}}]),a}(p.Component),Ne=a(14),ke=a.n(Ne),Se=a(29),we=a.n(Se),Oe=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={seller:JSON.parse(localStorage.seller),reviews:JSON.parse(localStorage.userReviews)},r}return Object(v.a)(a,[{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:this.state.seller.image,alt:""})),d.a.createElement("div",{className:"col-lg-9 col-md9 col-9"},d.a.createElement("h4",null,this.state.seller.username.charAt(0).toUpperCase()+this.state.seller.username.slice(1).toLowerCase()),d.a.createElement("hr",null),null!==this.state.seller.firstName&&""!==this.state.seller.firstName?d.a.createElement(d.a.Fragment,null,null===this.state.seller.lastName||""===this.state.seller.lastName?d.a.createElement("p",null,"Name: ",this.state.seller.firstName.charAt(0).toUpperCase()+this.state.seller.firstName.slice(1)):d.a.createElement("p",null,"Name: ",this.state.seller.firstName.charAt(0).toUpperCase()+this.state.seller.firstName.slice(1)," ",this.state.seller.lastName.charAt(0).toUpperCase()+this.state.seller.lastName.slice(1).toLowerCase())):d.a.createElement(d.a.Fragment,null,null!==this.state.seller.lastName&&""!==this.state.seller.lastName?d.a.createElement("p",null,"Name: ",this.state.seller.lastName.charAt(0).toUpperCase()+this.state.seller.lastName.slice(1)):""),d.a.createElement("p",null,"Email: ",this.state.seller.email.toLowerCase()),null!==this.state.seller.phone&&""!==this.state.seller.phone?d.a.createElement("p",null,"Phone: ",this.state.seller.phone):"","Publisher"===this.state.seller.accountType?d.a.createElement(d.a.Fragment,null,null!==this.state.seller.abn&&""!==this.state.seller.abn?d.a.createElement("p",null,"ABN: ",this.state.seller.abn):""):"",null!==this.state.seller.about&&""!==this.state.seller.about?d.a.createElement("p",null,"About: ",this.state.seller.about):"")))),d.a.createElement(d.a.Fragment,null,this.state.reviews.length>0?d.a.createElement("div",{className:"review-container"},d.a.createElement("h1",{className:"review-heading"},"Reviews"),this.state.reviews.map((function(e){return d.a.createElement("div",{key:e.id,className:"user-reviews"},d.a.createElement("label",{className:"review-time-label"},"-  ",ke()(e.create_At).fromNow()),d.a.createElement("br",null),d.a.createElement(we.a,{className:"star-rating",starCount:5,value:e.score}),d.a.createElement("br",null),d.a.createElement("label",{className:"review-review-label"},e.review),d.a.createElement("br",null),d.a.createElement("label",{className:"review-reviewer-label"},e.reviewer.charAt(0).toUpperCase()+e.reviewer.slice(1)),d.a.createElement("br",null),d.a.createElement("br",null))}))):""))}}]),a}(p.Component),Ce=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={book:JSON.parse(localStorage.book),reviews:JSON.parse(localStorage.bookReviews),paypalIsLoaded:!1},r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){m=window.paypal.Buttons.driver("react",{React:d.a,ReactDOM:b.a}),this.setState({paypalIsLoaded:!0})}},{key:"createOrder",value:function(e,t){return t.order.create({purchase_units:[{amount:{value:this.state.book.price.toFixed(2)}}]})}},{key:"onApprove",value:function(e,t){var a={seller:this.state.book.seller,buyer:I.getState().security.user.username,book:this.state.book.title,bookID:this.state.book.id,price:this.state.book.price.toFixed(2),status:"Preparing"};return this.props.createNewOrder(a,this.props.history),t.order.capture()}},{key:"onSubmit",value:function(e,t){e.preventDefault(),this.props.getSeller(t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"single-book-row"},d.a.createElement("div",{className:"single-book-image-container"},d.a.createElement("img",{className:"single-book-image",src:this.state.book.image,alt:this.state.book.title})),d.a.createElement("div",{className:"book-information-container"},d.a.createElement("div",{className:"book-information"},d.a.createElement("h1",{className:"book-title-listing"},this.state.book.title),d.a.createElement("h1",{className:"book-author-listing"},d.a.createElement("strong",null,"By:")," ",this.state.book.author),d.a.createElement("hr",null),d.a.createElement("h1",{className:"book-genre-listing"},d.a.createElement("strong",null,d.a.createElement("strong",null,"Genre:"))," ",this.state.book.genre),d.a.createElement("h1",{className:"book-isbn-listing"},d.a.createElement("strong",null,d.a.createElement("strong",null,"ISBN:"))," ",this.state.book.isbn),d.a.createElement("br",null),d.a.createElement("h1",{className:"book-description-listing"},d.a.createElement("strong",null,d.a.createElement("strong",null,"Description:"))),d.a.createElement("p",null,this.state.book.description)),d.a.createElement("div",{className:"book-buy-container"},d.a.createElement("h1",{className:"book-seller-listing"},d.a.createElement("strong",null,d.a.createElement("strong",null,"Seller:"))," ",d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,e.state.book.seller)}},this.state.book.seller.charAt(0).toUpperCase()+this.state.book.seller.slice(1))),d.a.createElement("h1",{className:"book-price-listing"},"$",this.state.book.price.toFixed(2)),I.getState().security.validToken?d.a.createElement(d.a.Fragment,null,"Admin"===I.getState().security.user.accountType?d.a.createElement("p",null,"Admin cannot buy"):d.a.createElement(d.a.Fragment,null,this.state.book.seller.toLowerCase()===I.getState().security.user.username.toLowerCase()?d.a.createElement("p",null,"Why would you want to buy your own book?"):this.state.paypalIsLoaded?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"paypal-btn"},d.a.createElement(m,{createOrder:function(t,a){return e.createOrder(t,a)},onApprove:function(t,a){return e.onApprove(t,a)}}))):"")):d.a.createElement("p",null,"Login to purchase")))),d.a.createElement("hr",null),d.a.createElement(d.a.Fragment,null,this.state.reviews.length>0?d.a.createElement("div",{className:"review-container"},d.a.createElement("h1",{className:"review-heading"},"Reviews"),this.state.reviews.map((function(e){return d.a.createElement("div",{key:e.id,className:"user-reviews"},d.a.createElement("label",{className:"review-time-label"},"-  ",ke()(e.create_At).fromNow()),d.a.createElement("br",null),d.a.createElement(we.a,{className:"star-rating",starCount:5,value:e.score}),d.a.createElement("br",null),d.a.createElement("label",{className:"review-review-label"},e.review),d.a.createElement("br",null),d.a.createElement("label",{className:"review-reviewer-label"},e.reviewer.charAt(0).toUpperCase()+e.reviewer.slice(1)),d.a.createElement("br",null),d.a.createElement("br",null))}))):""))}}]),a}(p.Component),je=Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getSeller:V,createNewOrder:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-13-210-206-21.ap-southeast-2.compute.amazonaws.com:8082/api/orders/createOrder",e);case 3:t.push("/payment-success"),a.next=10;break;case 6:a.prev=6,a.t0=a.catch(0),alert("Create Order failed!"),t.push("/");case 10:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()}})(Ce),Ae=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"payment-success"},d.a.createElement("h1",null,"Payment Success!"),d.a.createElement("h2",null,"Thank you for your purchase."),d.a.createElement("h2",null,"Check the status of your order in your profile.")))}}]),a}(p.Component),xe={title:"",isbn:"",author:"",genre:"",description:"",price:"",image:"",titleError:"",isbnError:"",authorError:"",genreError:"",descriptionError:"",priceError:"",imageError:""},Re=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).validate=function(){var e="",t="",a="",n="",l="",s="",c="";return r.state.title.trim()||(e="Title required"),r.state.isbn.trim()?13===r.state.isbn.length&&/^[0-9\b]+$/.test(r.state.isbn)||(t="ISBN must be 13 digits"):t="ISBN required",r.state.author.trim()||(a="Author required"),r.state.genre.trim()||(n="Genre required"),r.state.description.trim()||(l="Description required"),r.state.price.trim()?/^(\d+(\.\d{0,2})?|\.?\d{1,2})$/.test(r.state.price)||(s="Not a valid price"):s="Price required",null===r.state.image&&(c="Image required"),!(e||t||a||n||l||s||c)||(r.setState({titleError:e,isbnError:t,authorError:a,genreError:n,descriptionError:l,priceError:s,imageError:c}),!1)},r.state=xe,r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validate()){var t={title:this.state.title,isbn:this.state.isbn,author:this.state.author,genre:this.state.genre,description:this.state.description,price:this.state.price,image:this.state.image,seller:I.getState().security.user.username};this.props.createNewBook(t,this.props.history)}}},{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"App"},d.a.createElement(Q,null)),d.a.createElement("div",{className:"book-form-container"},d.a.createElement("form",{className:"book-form",onSubmit:this.onSubmit},d.a.createElement("h2",{className:"book-form-heading"},"Sell A Book"),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"title",className:"book-form-label"},"Title")),d.a.createElement("div",null,d.a.createElement("input",{id:"title",type:"text",name:"title",className:"book-form-input",placeholder:"Enter title of the book",value:this.state.title,onChange:this.onChange}),d.a.createElement("p",null,this.state.titleError))),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"image",className:"book-form-label"},"Image")),d.a.createElement("div",null,d.a.createElement("input",{id:"image",type:"text",name:"image",className:"book-form-input",placeholder:"URL of image",value:this.state.image,onChange:this.onChange}),d.a.createElement("p",null,this.state.imageError))),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"isbn",className:"book-form-label"},"ISBN")),d.a.createElement("div",null,d.a.createElement("input",{id:"isbn",type:"text",name:"isbn",className:"book-form-input",placeholder:"Enter isbn of the book",value:this.state.isbn,onChange:this.onChange}),d.a.createElement("p",null,this.state.isbnError))),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"author",className:"book-form-label"},"Author")),d.a.createElement("div",null,d.a.createElement("input",{id:"author",type:"text",name:"author",className:"book-form-input",placeholder:"Enter author of the book",value:this.state.author,onChange:this.onChange}),d.a.createElement("p",null,this.state.authorError))),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"genre",className:"book-form-label"},"Genre")),d.a.createElement("div",null,d.a.createElement("input",{id:"genre",type:"text",name:"genre",className:"book-form-input",placeholder:"Enter genre of the book",value:this.state.genre,onChange:this.onChange}),d.a.createElement("p",null,this.state.genreError))),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"price",className:"book-form-label"},"Price")),d.a.createElement("div",null,d.a.createElement("input",{id:"price",type:"text",name:"price",className:"book-form-input",placeholder:"Enter price for book",value:this.state.price,onChange:this.onChange}),d.a.createElement("p",null,this.state.priceError))),d.a.createElement("div",{className:"create-book-field"},d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"description",className:"book-form-label"},"Description")),d.a.createElement("div",null,d.a.createElement("textarea",{id:"description",type:"text",name:"description",className:"book-form-input",placeholder:"Enter description for book",value:this.state.description,onChange:this.onChange}),d.a.createElement("p",null,this.state.descriptionError))),d.a.createElement("br",null),d.a.createElement("button",{className:"buy-btn",type:"submit"},"Sell Book"))))}}]),a}(p.Component),Ue=Object(k.b)((function(e){return{errors:e.errors}}),{createNewBook:function(e,t){return function(){var a=Object(J.a)(q.a.mark((function a(r){return q.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,D.a.post("http://ec2-13-55-218-209.ap-southeast-2.compute.amazonaws.com:8080/api/books/sell",e);case 3:t.push("/"),alert("Book listed!"),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),t.push("/"),alert("Failed to list book!");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}})(Re),Te=a(60),Be=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).removeFromTable=function(e){var t=Object(Te.a)(r.state.users),a=r.state.users.findIndex((function(t){return t.id===e}));t.splice(a,1),r.setState({users:t})},r.state={users:[]},r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<JSON.parse(localStorage.users).length;t++)!1===JSON.parse(localStorage.users)[t].isActive&&e.push(JSON.parse(localStorage.users)[t]);this.setState({users:e})}},{key:"onSubmit",value:function(e,t,a){e.preventDefault(),"pendingAccounts"===t?this.props.getUsers(this.props.history,"toPending"):"allAccounts"===t?this.props.getUsers(this.props.history,"toAllUsers"):"decline"===t?(this.props.deleteUser(a),this.removeFromTable(a)):"approve"===t?(this.props.approveUser(a),this.removeFromTable(a)):"getUser"===t&&this.props.getSeller(a,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"allAccounts")}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-edit pr-1"},"All Accounts"))),d.a.createElement(y.b,{to:"/dashboard"},d.a.createElement("li",{className:"list-group-item board"},"Back")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-9"},this.state.users.length>0?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"container"},d.a.createElement("h4",null,"Pending Accounts"),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," Username"),d.a.createElement("td",null," Email"),d.a.createElement("td",null," Created"))),d.a.createElement("tbody",null,this.state.users.map((function(t){return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null," ",d.a.createElement(y.b,{to:"",onClick:function(a){return e.onSubmit(a,"getUser",t.username)}},t.username.charAt(0).toUpperCase()+t.username.slice(1))),d.a.createElement("td",null," ",t.email),d.a.createElement("td",null," ",ke()(t.create_At).fromNow()),d.a.createElement("td",null,d.a.createElement("button",{onClick:function(a){return e.onSubmit(a,"approve",t.id)}},"Approve")),d.a.createElement("td",null,d.a.createElement("button",{onClick:function(a){return e.onSubmit(a,"decline",t.id)}},"Decline")))})))))):d.a.createElement("h4",null,"No pending accounts"))))))}}]),a}(p.Component),Fe=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getUsers:X,getSeller:V,deleteUser:W,approveUser:function(e){return function(){var t=Object(J.a)(q.a.mark((function t(a){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.put("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/approve/".concat(e));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),alert("Approve error");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}})(Be)),Ie=a(31),_e=[{label:"Id",key:"id"},{label:"Username",key:"username"},{label:"FirstName",key:"firstName"},{label:"LastName",key:"lastName"},{label:"Email",key:"email"},{label:"Phone",key:"phone"},{label:"ABN",key:"abn"},{label:"AccountType",key:"accountType"},{label:"AccountActive",key:"isActive"},{label:"About",key:"about"},{label:"Create_At",key:"create_At"}],Pe=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={users:[],csvReport:{filename:"AllAccounts.csv",headers:_e,data:JSON.parse(localStorage.users)}},r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){for(var e=[],t=0;t<JSON.parse(localStorage.users).length;t++)!0===JSON.parse(localStorage.users)[t].isActive&&e.push(JSON.parse(localStorage.users)[t]);this.setState({users:e})}},{key:"onSubmit",value:function(e,t){e.preventDefault(),"pendingAccounts"===t?this.props.getUsers(this.props.history,"toPending"):"allAccounts"===t?this.props.getUsers(this.props.history,"toAllUsers"):this.props.getSeller(t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t,"pendingAccounts")}},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-flag-checkered pr-1"},"Pending Accounts"))),d.a.createElement(y.b,{to:"/dashboard"},d.a.createElement("li",{className:"list-group-item board"},"Back")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-8"},d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"csv-button"},d.a.createElement("h4",null,"All Accounts"),d.a.createElement("div",{className:"csv-button-1"},d.a.createElement(Ie.CSVLink,this.state.csvReport,"Export to CSV"))),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," Username"),d.a.createElement("td",null," Email"),d.a.createElement("td",null," Account Type"),d.a.createElement("td",null," Created"))),d.a.createElement("tbody",null,this.state.users.map((function(t){return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null," ",d.a.createElement(y.b,{to:"",onClick:function(a){return e.onSubmit(a,t.username)}},t.username.charAt(0).toUpperCase()+t.username.slice(1))),d.a.createElement("td",null," ",t.email),d.a.createElement("td",null," ",t.accountType),d.a.createElement("td",null," ",ke()(t.create_At).fromNow()))}))))))))))}}]),a}(p.Component),De=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getUsers:X,getSeller:V})(Pe)),Le=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={orders:JSON.parse(localStorage.orders)},r}return Object(v.a)(a,[{key:"onSubmit",value:function(e,t,a,r){e.preventDefault(),"getSeller"===a||"getBuyer"===a?this.props.getSeller(t,this.props.history):"orderUpdate"===a?this.props.orderUpdate(r,t,this.props.history):"reviewBook"===a&&this.props.reviewBook(r,t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"/dashboard"},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},"Back")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-8"},d.a.createElement("div",{className:"container"},d.a.createElement("h4",null,"Purchases"),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," Book"),d.a.createElement("td",null," Price"),d.a.createElement("td",null," Seller"),d.a.createElement("td",null," Status"),d.a.createElement("td",null," Bought"))),d.a.createElement("tbody",null,this.state.orders.map((function(t){return d.a.createElement("tr",{key:t.id},t.buyer.toLowerCase()===I.getState().security.user.username.toLowerCase()?d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null," ",d.a.createElement(y.b,{to:{pathname:"review-book",state:{bookReviewedID:t.bookID,bookReviewedTitle:t.book}}},t.book)),d.a.createElement("td",null," $",t.price.toFixed(2)),d.a.createElement("td",null," ",d.a.createElement(y.b,{to:{pathname:"review-user",state:{userReviewed:t.seller}}},t.seller.charAt(0).toUpperCase()+t.seller.slice(1).toLowerCase())),d.a.createElement("td",null," ",t.status),d.a.createElement("td",null," ",ke()(t.create_At).fromNow()),ke()().diff(t.create_At,"minutes")<120&&"CANCELLED"!==t.status?d.a.createElement("td",null,d.a.createElement("button",{onClick:function(a){return e.onSubmit(a,"cancelled","orderUpdate",t.id)}},"Cancel order")):d.a.createElement(d.a.Fragment,null)):"")})))),d.a.createElement("br",null),d.a.createElement("h4",null,"Sales"),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," Book"),d.a.createElement("td",null," Price"),d.a.createElement("td",null," Buyer"),d.a.createElement("td",null," Status"),d.a.createElement("td",null," Sold"))),d.a.createElement("tbody",null,this.state.orders.map((function(t){return d.a.createElement("tr",{key:t.id},t.seller.toLowerCase()===I.getState().security.user.username.toLowerCase()?d.a.createElement(d.a.Fragment,null,d.a.createElement("td",null," ",t.book),d.a.createElement("td",null," $",t.price.toFixed(2)),d.a.createElement("td",null," ",d.a.createElement(y.b,{to:{pathname:"review-user",state:{userReviewed:t.buyer}}},t.buyer)),d.a.createElement("td",null," ",t.status),d.a.createElement("td",null," ",ke()(t.create_At).fromNow()),"Preparing"===t.status?d.a.createElement("td",null,d.a.createElement("button",{onClick:function(a){return e.onSubmit(a,"shipped","orderUpdate",t.id)}},"Mark as shipped")):d.a.createElement(d.a.Fragment,null),"Shipped"===t.status?d.a.createElement("td",null,d.a.createElement("button",{onClick:function(a){return e.onSubmit(a,"delivered","orderUpdate",t.id)}},"Mark as delivered")):d.a.createElement(d.a.Fragment,null)):"")}))))))))))}}]),a}(p.Component),qe=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{orderUpdate:function(e,t,a){return function(){var r=Object(J.a)(q.a.mark((function r(n){var l;return q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,D.a.put("http://ec2-13-210-206-21.ap-southeast-2.compute.amazonaws.com:8082/api/orders/".concat(t,"/").concat(e));case 3:l=r.sent,localStorage.setItem("orders",JSON.stringify(l.data)),n({type:"GET_USER_ORDERS",payload:l.data}),a.push("/"),a.push("/user-orders"),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),alert("Error updating order");case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()},getSeller:V})(Le)),Je=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).validate=function(){var e="",t="",a="";return r.state.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(r.state.email)||(e="Invalid email"):e="Email required",r.state.abn||"Publisher"!==I.getState().security.user.accountType?10===r.state.abn.length&&/^[0-9\b]+$/.test(r.state.abn)||0===r.state.abn.length||(t="ABN must be 10 digits"):t="ABN required",10===r.state.phone.length&&/^[0-9\b]+$/.test(r.state.phone)||0===r.state.phone.length||(a="Phone number must be 10 digits"),!(e||t||a)||(r.setState({emailError:e,abnError:t,phoneError:a}),!1)},r.state={firstName:"",lastName:"",email:"",phone:"",about:"",abn:"",image:"",emailError:"",abnError:"",phoneError:"",imageSelected:!1},r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e="",t="",a="",r="",n="",l="",s="";if(I.getState().security.user.firstName&&(e=I.getState().security.user.firstName.charAt(0).toUpperCase()+I.getState().security.user.firstName.slice(1)),I.getState().security.user.lastName&&(t=I.getState().security.user.lastName.charAt(0).toUpperCase()+I.getState().security.user.lastName.slice(1)),I.getState().security.user.email&&(a=I.getState().security.user.email),I.getState().security.user.phone&&(r=I.getState().security.user.phone),I.getState().security.user.about&&(n=I.getState().security.user.about),I.getState().security.user.abn&&(l=I.getState().security.user.abn),I.getState().security.user.image&&(s=I.getState().security.user.image),(e||t||a||r||n||l||s)&&this.setState({firstName:e,lastName:t,email:a,phone:r,about:n,abn:l,image:s}),this.props.errors.emailError){var c=this.props.errors.emailError;this.setState({emailError:c}),this.props.errors.emailError=""}}},{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validate()){var t={firstName:this.state.firstName.toLowerCase(),lastName:this.state.lastName.toLowerCase(),email:this.state.email.toLowerCase(),phone:this.state.phone,about:this.state.about,abn:this.state.abn,image:this.state.image};this.props.editUser(I.getState().security.user.id,t,this.props.history)}}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:this.state.image,alt:""}),d.a.createElement("br",null),d.a.createElement("label",{htmlFor:"firstName",className:"name-label"},"Image link"),d.a.createElement("input",{id:"image",type:"text",name:"image",className:"form-input",placeholder:"Link to image",value:this.state.image,onChange:this.onChange}),this.state.imageSelected?d.a.createElement("div",null,d.a.createElement("button",{onClick:this.fileUploadHandler},"Upload"),d.a.createElement("img",{id:"thumbnail",alt:"profile-preview"})):"",d.a.createElement("ul",{className:"list-group"},d.a.createElement("br",null),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t)}},d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-flag-checkered pr-1"},"Save and return"))))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-9"},d.a.createElement("h4",null,"Edit Profile"),d.a.createElement("hr",null),d.a.createElement("div",{className:"edit-name-labels"},d.a.createElement("label",{htmlFor:"firstName",className:"name-label"},"First Name"),d.a.createElement("label",{htmlFor:"lastName",className:"name-label"},"Last Name")),d.a.createElement("div",{className:"edit-name-inputs"},d.a.createElement("input",{id:"firstName",type:"text",name:"firstName",className:"name-input",placeholder:"Enter your first name",value:this.state.firstName,onChange:this.onChange}),d.a.createElement("input",{id:"lastName",type:"text",name:"lastName",className:"name-input",placeholder:"Enter your last name",value:this.state.lastName,onChange:this.onChange})),d.a.createElement("br",null),d.a.createElement("div",{className:"edit-inputs"},d.a.createElement("label",{htmlFor:"email",className:"edit-label"},"Email"),d.a.createElement("input",{id:"email",type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:this.state.email,onChange:this.onChange}),d.a.createElement("p",null,this.state.emailError),d.a.createElement("br",null)),d.a.createElement("div",{className:"edit-inputs"},d.a.createElement("label",{htmlFor:"phone",className:"edit-label"},"Phone"),d.a.createElement("input",{id:"phone",type:"text",name:"phone",className:"form-input",placeholder:"Enter your phone",value:this.state.phone,onChange:this.onChange}),d.a.createElement("p",null,this.state.phoneError),d.a.createElement("br",null)),"Publisher"===I.getState().security.user.accountType?d.a.createElement("div",{className:"edit-inputs"},d.a.createElement("label",{htmlFor:"abn",className:"edit-label"},"Abn"),d.a.createElement("input",{id:"abn",type:"text",name:"abn",className:"form-input",placeholder:"Enter your abn",value:this.state.abn,onChange:this.onChange}),d.a.createElement("p",null,this.state.abnError),d.a.createElement("br",null)):"",d.a.createElement("div",null,d.a.createElement("label",{htmlFor:"about",className:"edit-label"},"About"),d.a.createElement("textarea",{id:"about",type:"text",name:"about",className:"text-area-input",placeholder:"Tell us about yourself",value:this.state.about,onChange:this.onChange})))))))}}]),a}(p.Component),ze=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{editUser:function(e,t,a){return function(){var r=Object(J.a)(q.a.mark((function r(n){var l;return q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,D.a.put("http://ec2-13-210-248-68.ap-southeast-2.compute.amazonaws.com:8081/api/users/".concat(e),null,{params:{firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,abn:t.abn,about:t.about,image:t.image}});case 3:l=r.sent,n({type:"SET_CURRENT_USER",payload:l.data}),a.push("/dashboard"),r.next=13;break;case 8:r.prev=8,r.t0=r.catch(0),400===r.t0.response.status?n({type:"EMAIL_EXISTS_ERROR",payload:r.t0.response.data.username}):alert("Failed to save profile"),a.push("/"),a.push("/edit");case 13:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}})(Je)),Ge=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("p",null,"Group 5"),d.a.createElement("p",null,"Adam Wuei Cherng Hannington-Chen     s3720247"),d.a.createElement("p",null,"Haopeng Zhou                         s3555521"),d.a.createElement("p",null,"Quoc Tran                            s3827826"),d.a.createElement("p",null,"Yuehan Chen                          s3714653"))}}]),a}(p.Component),Me=[{label:"Id",key:"id"},{label:"Seller",key:"seller"},{label:"Buyer",key:"buyer"},{label:"Book",key:"book"},{label:"BookID",key:"bookID"},{label:"Price",key:"price"},{label:"Status",key:"status"},{label:"Create_At",key:"create_At"}],$e=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={orders:JSON.parse(localStorage.allOrders),csvReport:{filename:"AllTransactions.csv",headers:Me,data:JSON.parse(localStorage.allOrders)}},r}return Object(v.a)(a,[{key:"onSubmit",value:function(e,t,a){e.preventDefault(),("getSeller"===a||"getBuyer"===a)&&this.props.getSeller(t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"/dashboard"},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},"Back")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-8"},d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"csv-button"},d.a.createElement("h4",null,"All Transactions"),d.a.createElement("div",{className:"csv-button-1"},d.a.createElement(Ie.CSVLink,this.state.csvReport,"Export to CSV"))),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," Book"),d.a.createElement("td",null," Price"),d.a.createElement("td",null," Seller"),d.a.createElement("td",null," Status"),d.a.createElement("td",null," Purchased"),d.a.createElement("td",null," Buyer"))),d.a.createElement("tbody",null,this.state.orders.map((function(t){return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null," ",t.book.charAt(0).toUpperCase()+t.book.slice(1)),d.a.createElement("td",null," $",t.price.toFixed(2)),d.a.createElement("td",null," ",d.a.createElement(y.b,{to:"",onClick:function(a){return e.onSubmit(a,t.seller,"getSeller")}},t.seller.charAt(0).toUpperCase()+t.seller.slice(1))),d.a.createElement("td",null," ",t.status.charAt(0).toUpperCase()+t.status.slice(1)),d.a.createElement("td",null," ",ke()(t.create_At).fromNow()),d.a.createElement("td",null," ",d.a.createElement(y.b,{to:"",onClick:function(a){return e.onSubmit(a,t.buyer,"getBuyer")}},t.buyer.charAt(0).toUpperCase()+t.buyer.slice(1))))}))))))))))}}]),a}(p.Component),Xe=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getSeller:V})($e)),Ve=[{label:"Id",key:"id"},{label:"ISBN",key:"isbn"},{label:"Title",key:"title"},{label:"Author",key:"author"},{label:"Genre",key:"genre"},{label:"Description",key:"description"},{label:"Price",key:"price"},{label:"Seller",key:"seller"},{label:"Create_At",key:"create_At"}],We=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={books:JSON.parse(localStorage.books),csvReport:{filename:"BookReport.csv",headers:Ve,data:JSON.parse(localStorage.books)}},r}return Object(v.a)(a,[{key:"onSubmit",value:function(e,t,a){e.preventDefault(),"getBook"===a?this.props.getBook(t,this.props.history):"getSeller"===a&&this.props.getSeller(t,this.props.history)}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"/dashboard"},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},"Back")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-8"},d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"csv-button"},d.a.createElement("h4",null,"All Books"),d.a.createElement("div",{className:"csv-button-1"},d.a.createElement(Ie.CSVLink,this.state.csvReport,"Export to CSV"))),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," Title"),d.a.createElement("td",null," Author"),d.a.createElement("td",null," ISBN"),d.a.createElement("td",null," Seller"),d.a.createElement("td",null," Price"),d.a.createElement("td",null," Listed"))),d.a.createElement("tbody",null,this.state.books.map((function(t){return d.a.createElement("tr",{key:t.id},d.a.createElement("td",null," ",d.a.createElement(y.b,{to:"",onClick:function(a){return e.onSubmit(a,t.id,"getBook")}},t.title.charAt(0).toUpperCase()+t.title.slice(1))),d.a.createElement("td",null," ",t.author.charAt(0).toUpperCase()+t.author.slice(1)),d.a.createElement("td",null," ",t.isbn),d.a.createElement("td",null," ",d.a.createElement(y.b,{to:"",onClick:function(a){return e.onSubmit(a,t.seller,"getSeller")}},t.seller.charAt(0).toUpperCase()+t.seller.slice(1))),d.a.createElement("td",null," ",t.price.toFixed(2)),d.a.createElement("td",null," ",ke()(t.create_At).fromNow()))}))))))))))}}]),a}(p.Component),Ze=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{getBook:z,getSeller:V})(We)),He=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).validate=function(){var e="",t="";return r.state.review||(e="Review required"),r.state.score||(t="Star rating required"),!e&&!t||(r.setState({reviewError:e,scoreError:t}),!1)},r.state={reviewer:"",review:"",userReviewed:"",score:"",reviewError:"",scoreError:""},r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e="";this.props.location.state.userReviewed&&(e=this.props.location.state.userReviewed),e&&this.setState({userReviewed:e})}},{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onStarClick",value:function(e){this.setState({score:e})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validate()){var t={reviewer:I.getState().security.user.username,review:this.state.review,userReviewed:this.state.userReviewed,score:this.state.score};this.props.postReview(t,this.props.history)}}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"/user-orders"},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},"Back")),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t)}},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-flag-checkered pr-1"},"Post review"))))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-9"},d.a.createElement("h4",null,this.state.userReviewed.charAt(0).toUpperCase()+this.state.userReviewed.slice(1)),d.a.createElement("hr",null),d.a.createElement("div",null,d.a.createElement("div",{className:"star-rating-input"},d.a.createElement(we.a,{id:"score",name:"score",starCount:5,value:this.state.score,onStarClick:this.onStarClick.bind(this)}),d.a.createElement("p",null,this.state.scoreError)),d.a.createElement("div",{className:"review-input"},d.a.createElement("textarea",{id:"review",type:"text",name:"review",className:"text-area-input",placeholder:"Write a review",value:this.state.review,onChange:this.onChange}),d.a.createElement("p",null,this.state.reviewError))))))))}}]),a}(p.Component),Qe=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{postReview:ve})(He)),Ye=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).validate=function(){var e="",t="";return r.state.review||(e="Review required"),r.state.score||(t="Star rating required"),!e&&!t||(r.setState({reviewError:e,scoreError:t}),!1)},r.state={reviewer:"",review:"",bookReviewedTitle:"",bookReviewedID:"",score:"",reviewError:"",scoreError:""},r.onChange=r.onChange.bind(Object(_.a)(r)),r.onSubmit=r.onSubmit.bind(Object(_.a)(r)),r}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e="",t="";this.props.location.state.bookReviewedTitle&&(e=this.props.location.state.bookReviewedTitle,t=this.props.location.state.bookReviewedID),(e||t)&&this.setState({bookReviewedTitle:e,bookReviewedID:t})}},{key:"onChange",value:function(e){this.setState(Object(G.a)({},e.target.name,e.target.value))}},{key:"onStarClick",value:function(e){this.setState({score:e})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validate()){var t={reviewer:I.getState().security.user.username,review:this.state.review,bookReviewedID:this.state.bookReviewedID,score:this.state.score};this.props.postReview(t,this.props.history)}}},{key:"render",value:function(){var e=this;return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"/user-orders"},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},"Back")),d.a.createElement(y.b,{to:"",onClick:function(t){return e.onSubmit(t)}},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},d.a.createElement("i",{className:"fa fa-flag-checkered pr-1"},"Post review"))))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-9"},d.a.createElement("h4",null,this.state.bookReviewedTitle),d.a.createElement("hr",null),d.a.createElement("div",null,d.a.createElement("div",{className:"star-rating-input"},d.a.createElement(we.a,{id:"score",name:"score",starCount:5,value:this.state.score,onStarClick:this.onStarClick.bind(this)}),d.a.createElement("p",null,this.state.scoreError)),d.a.createElement("div",{className:"review-input"},d.a.createElement("textarea",{id:"review",type:"text",name:"review",className:"text-area-input",placeholder:"Write a review",value:this.state.review,onChange:this.onChange}),d.a.createElement("p",null,this.state.reviewError))))))))}}]),a}(p.Component),Ke=Object(N.e)(Object(k.b)((function(e){return{security:e.security,errors:e.errors}}),{postReview:ve})(Ye)),et=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(E.a)(this,a),(r=t.call(this,e)).state={reviews:JSON.parse(localStorage.reviews)},r}return Object(v.a)(a,[{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement(Q,null),d.a.createElement("div",{className:"container"},d.a.createElement("div",{className:"card card-body bg-light mb-3"},d.a.createElement("div",{className:"row"},d.a.createElement("div",{className:"col-3"},d.a.createElement("img",{src:I.getState().security.user.image,alt:""}),d.a.createElement("ul",{className:"list-group"},d.a.createElement(y.b,{to:"/dashboard"},d.a.createElement("br",null),d.a.createElement("li",{className:"list-group-item board"},"Back")))),d.a.createElement("div",{className:"col-lg-9 col-md-4 col-8"},d.a.createElement("div",{className:"container"},d.a.createElement("h4",null,"All Reviews"),d.a.createElement("table",{className:"table table-striped"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null," User"),d.a.createElement("td",null," Book ID"),d.a.createElement("td",null," Score"),d.a.createElement("td",null," By"),d.a.createElement("td",null," Review"),d.a.createElement("td",null," Posted"))),d.a.createElement("tbody",null,this.state.reviews.map((function(e){return d.a.createElement("tr",{key:e.id},d.a.createElement("td",null," ",e.userReviewed),d.a.createElement("td",null," ",e.bookReviewedID),d.a.createElement("td",null," ",e.score),d.a.createElement("td",null," ",e.reviewer),d.a.createElement("td",null," ",e.review),d.a.createElement("td",null," ",ke()(e.create_At).fromNow()))}))))))))))}}]),a}(p.Component),tt=localStorage.jwtToken;if(tt){le(tt);var at=Object(se.a)(tt);I.dispatch({type:"SET_CURRENT_USER",payload:at});var rt=Date.now()/1e3;at.exp<rt&&I.dispatch(ce)}var nt=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(E.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return d.a.createElement(k.a,{store:I},d.a.createElement(y.a,null,d.a.createElement("div",{className:"App"},d.a.createElement(N.a,{exact:!0,path:"/",component:K}),d.a.createElement(N.a,{exact:!0,path:"/search",component:Ee}),d.a.createElement(N.a,{exact:!0,path:"/book",component:je}),d.a.createElement(N.a,{exact:!0,path:"/seller",component:Oe}),d.a.createElement(N.a,{exact:!0,path:"/about",component:Ge}),d.a.createElement(N.a,{exact:!0,path:"/signup",component:de}),d.a.createElement(N.a,{exact:!0,path:"/login",component:ue}),d.a.createElement(N.a,{exact:!0,path:"/dashboard",component:ye}),d.a.createElement(N.a,{exact:!0,path:"/edit",component:ze}),d.a.createElement(N.a,{exact:!0,path:"/sell",component:Ue}),d.a.createElement(N.a,{exact:!0,path:"/payment-success",component:Ae}),d.a.createElement(N.a,{exact:!0,path:"/pending",component:Fe}),d.a.createElement(N.a,{exact:!0,path:"/allUsers",component:De}),d.a.createElement(N.a,{exact:!0,path:"/user-orders",component:qe}),d.a.createElement(N.a,{exact:!0,path:"/all-orders",component:Xe}),d.a.createElement(N.a,{exact:!0,path:"/all-books",component:Ze}),d.a.createElement(N.a,{exact:!0,path:"/all-reviews",component:et}),d.a.createElement(N.a,{exact:!0,path:"/review-user",component:Qe}),d.a.createElement(N.a,{exact:!0,path:"/review-book",component:Ke}))))}}]),a}(p.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.render(d.a.createElement(d.a.StrictMode,null,d.a.createElement(nt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},63:function(e,t,a){e.exports=a(108)},68:function(e,t,a){},92:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.eaa1dc7a.chunk.js.map